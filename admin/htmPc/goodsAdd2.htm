<style type="text/css">
    #goodsAdd2{
        position: absolute;
        z-index: 100;
        width: 1200px;
        overflow: hidden;
    }
    .win_column{
        margin-top: -20px;
        height: 500px;
        border: solid 1px #50D1DE;
    }
    .win_column_head{
        background-color: #80E5F0;
        text-align: center;
        overflow: hidden;
        height: 30px;
        line-height: 30px;
        font-weight: bold;
        font-size: 25px;
    }
    .goods_price{
        float: left;
        width: 400px;
    }
    .goods_all{
        float: right;
        width: 780px;
    }
    .goods_price_li{
        width: 100%;
        overflow: hidden;
    }
    .goods_price_head{
        width: 80px;
        text-align: right;
        float: left;
        color: #07A1B1;
        font-size: 15px;
        display: block;
        height: 50px;
        line-height: 50px;
    }
    .goods_price_con{
        border: 1px solid #50D1DE;
        margin: 7px 0 10px 5px;
        padding: 3px 0 0 3px;
        width: 300px;
        float: left;
    }
    .goods_price_con_li{
        width: 70px;
        height: 30px;
        line-height: 30px;
        border: 1px solid #50D1DE;
        margin: 0 3px 3px 0;
        float: left;
        text-align: center;
    }
    .goods_price_con_li:hover{
        cursor: pointer;
        background-color: #50D1DE;
    }
</style>
<form action="./server/goodsAdd2Ser.php" method="post" id="goodsAdd2Form">
    <div id='goodsAdd2' class='win show_win'>
        <input type="hidden" name="g_id" id="g_id" value="<{$g_id}>" />
        <h1 class="win_head">添加商品详细资料 <div class="show_win_close">×</div></h1>
        <div class="win_column goods_price">
            <div class ="win_column_head">商品详细价格</div>
            <{foreach $gp as $key=>$value}>
            <div class='goods_price_li'>
                <label class='goods_price_head'><{$key}></label>
                <div class='goods_price_con'>
                    <{foreach $value as $v}>
                    <div class='goods_price_con_li' ><{$v['gp_name']}></div>
                    <{/foreach}>
                </div>
            </div>
            <{/foreach}>

        </div>
        <div class="win_column goods_all">
            <div class ="win_column_head">商品详细介绍</div>
        </div>
    </div>
</form>
<script>
    function succ(data) {
    }
    $(function(){
        $('.submit').click(function () {
            $(this).parents("form").submit();
        });
        if($('.select_li').length >4){
            $('.select_ul').css('width','268px');
        }
        $('.select_div').parent().mousemove(function(){
            $('.select_ul').show();
            $('.select_div').addClass('select_div_bottom');
        });
        $('.select_div').parent().mouseout(function(){
            $('.select_ul').hide();
            $('.select_div').removeClass('select_div_bottom');
        });
        //选择商品类型
        $('.select_li').click(function(){
            $('.select_div').html($(this).html());
            $('.select_ul').hide();
            $('#attr').children().remove();
            $('#price').children().remove();
            $('#gt_id').val($(this).attr('value'));
            $.getJSON('./server/goodsTypeInfoSer.php',{'gt_id':$(this).attr('value')},function(data){
                $('#gt_number').html(data['gt_number']);
                for(var j in data['attr']){
                    $('#attr').append("<div class='goods_attr_list'><input id='attr"+j+"' name='attr"+j+"' type='text'/><label for='attr"+j+"'  class='row_con_head'>"+data['attr'][j]+"</label></div>");
                }
                for(var i in data['price']){
                    $('#price').append("<div class='goods_price_list'><label class='row_con_head'>"+data['price'][i]+"</label><div class='win_row_con' id='price"+i+"'><div class='con_list_add'>+</div></div></div>");
                }
                $('.con_list_add').unbind();
                $('.con_list_add').click(function(){
                    var name = $(this).parent().attr("id");
                    $(this).before("<div class='con_list_input'><input class='list_form_div' type='text' name='"+name+"[]' ></div>");
                    $(this).prev().children('input').focus();
                });
                $('.input_label_value').focus();
            });

        });
        //验证
        $.checks.checkform($('#goodsAddForm'),{
            "async": {'success': succ,'beforeSend':function(){
                $('.input_label_value').first().val($('#gt_number').html()+$('.input_label_value').first().val());
            }}
//            "a_name": {
//                "name": "登录名",
//                "check": ["noSpechars", {"isLength": [4, 20]}, {"isAjax": ["/server/iskeySer.php"]}]
//            },
//            "a_nick": {
//                "name": "姓名",
//                "check": [{"isLength": [2, 20]}]
//            },
//            "a_pwd": {
//                "name": "密码",
//                "check": [{"isLength": [6, 20]}]
//            }
        });

    });
    $(function(){
        //上传头像
        var up = getUpload();
        up.browse_button = "imgUp";
        //up.container = "adminHeadImg";
        up['init'].UploadProgress = function(up,file){
            $("#bar").css("width",file.percent+"%");
        };
        up['init'].FileUploaded = function (up, file, info) {
            var domain = up.getOption('domain');
            var res = JSON.parse(info);
            $("#adminHeadImg>img").attr("src", domain + "/" + res.key + "?imageView2/5/w/75/h/75");
            $("#adminHeadImg>input[name='img']").val(domain + "/" + res.key);
            $("#bar").css("background-color","#50D1DE");
        };
        var uploader = Qiniu.uploader(up);
    });
</script>