<style type="text/css">
    #goodsAdd2{
        position: absolute;
        z-index: 100;
        width: 1200px;
        overflow: hidden;
    }
    .win_column{
        margin-top: -20px;
        border: solid 1px #50D1DE;
        height: 600px;
        overflow: auto;
    }
    .win_column_head{
        background-color: #80E5F0;
        text-align: center;
        overflow: hidden;
        height: 30px;
        line-height: 30px;
        font-weight: bold;
        font-size: 25px;
    }
    .goods_price{
        float: left;
        width: 400px;
    }
    .goods_all{
        float: right;
        width: 780px;
    }
    .goods_price_li{
        width: 100%;
        overflow: hidden;
    }
    .goods_price_head{
        width: 80px;
        text-align: right;
        float: left;
        color: #07A1B1;
        font-size: 15px;
        display: block;
        height: 50px;
        line-height: 50px;
    }
    .goods_price_con{
        border: 1px solid #50D1DE;
        margin: 7px 0 10px 5px;
        padding: 3px 0 0 3px;
        width: 300px;
        float: left;
    }
    .goods_price_con_li{
        width: 70px;
        height: 30px;
        line-height: 30px;
        border: 1px solid #50D1DE;
        margin: 0 3px 3px 0;
        float: left;
        text-align: center;
    }
    .goods_price_con_li:hover{
        cursor: pointer;
        background-color: #50D1DE;
    }
    .goods_price_con_li_click{
        background-color: #50D1DE;
        color:red;
    }

    .goods_price_con_info{
        display: none;
        width: 380px;
        overflow: hidden;
        margin: 5px auto;
        border: 1px solid #50D1DE;
        padding: 5px 0 0 5px;
    }
    .goods_price_con_info >div{
        float: left;
        margin: 0 5px 5px 0;
        border: 1px solid #50D1DE;
        overflow: hidden;
        height: 70px;
    }
    .goods_price_con_info >div.goods_price_con_list{
        width: 200px;
        border: hidden;
        height:auto;
        margin: 0;
    }
    .goods_price_con_prop{
        float: left;
        width: 43px;
        height: 70px;
        border: 1px solid #50D1DE;
        margin: 0 5px 5px 0;
        overflow: hidden;
    }
    .goods_td{
        width: 100%;
        height: 35px;
        text-align: center;
        line-height: 35px;
        border-bottom: 1px solid #50D1DE;
    }
    .goods_price_con_prop_select{
        border-bottom: 1px solid red;
    }
    .goods_price_con_prop_name{

    }
    .goods_price_con_sum{
        width: 40px;
    }
    .numbers{
        width: 40px;
    }
    .goods_price_con_price{

    }
    .goods_price_con_img{
        height: 70px;
        width: 70px;
    }
</style>
<form action="./server/goodsAdd2Ser.php" method="post" id="goodsAdd2Form">
    <div id='goodsAdd2' class='win show_win'>
        <input type="hidden" name="g_id" id="g_id" value="<{$g_id}>" />
        <h1 class="win_head">添加商品详细资料 <div class="show_win_close">×</div></h1>
        <div class="win_column goods_price">
            <div class ="win_column_head">商品详细价格</div>
            <{foreach $gp as $key=>$value}>
            <div class='goods_price_li'>
                <label class='goods_price_head'><{$key}></label>
                <div class='goods_price_con'>
                    <{foreach $value as $v}>
                    <div class='goods_price_con_li' gp_id="<{$v['gp_id']}> "><{$v['gp_name']}></div>
                    <{/foreach}>
                </div>
            </div>
            <{/foreach}>
            <div class="goods_price_con_info" id="goods_price_con_info_parents">
                <div class="goods_price_con_list">
                    <div class="goods_price_con_prop" gp_id="2" >
                        <div class="goods_td goods_price_con_prop_name"></div>
                        <div class="goods_td goods_price_con_prop_value"></div>
                    </div>
                    <div class="goods_price_con_prop" gp_id="5">
                        <div class="goods_td goods_price_con_prop_name"></div>
                        <div class="goods_td goods_price_con_prop_value"></div>
                    </div>
                </div>
                <div class="goods_price_con_sum">
                    <div class="goods_td">数量</div>
                    <div class="goods_td"><input class="numbers" type="text" name="sum" ></div>
                </div>
                <div class="goods_price_con_price">
                    <div class="goods_td">价格</div>
                    <div class="goods_td"><input class="numbers" type="text" name="sum" ></div>
                </div>
                <div class="goods_price_con_img">
                </div>
            </div>
        </div>
        <div class="win_column goods_all">
            <div class ="win_column_head">商品详细介绍</div>
        </div>
    </div>
</form>
<script>
    $(function (){
        $('.goods_price_con_li').click(function(){
            if(!$(this).hasClass('goods_price_con_li_click')){
                $(this).addClass('goods_price_con_li_click');
                $(".goods_price_con_prop[gp_id='"+$(this).attr('gp_id')+"']").addClass('goods_price_con_prop_select');

                $(this).siblings().removeClass('goods_price_con_li_click');
              //  $(".goods_price_con_prop[gp_id='"+$(this).attr('gp_id')+"']").siblings().children(".goods_price_con_prop_name[value='"++"']").map(function(){
//                    alert($(this).html());
//                });
                var gp_ids = [];
                var prop = $('.goods_price_con_list');
                $('.goods_price_con_li_click').map(function(){
                    gp_ids.push($(this).attr('gp_id'));
                    prop = prop.children(".goods_price_con_prop[gp_id='"+$(this).attr('gp_id')+"']").parent();
                });
                if(prop.length ==0){
                    var a = $('#goods_price_con_info_parents').clone();
                    for(var gp_id in gp_ids){
                        var gp_li = $(".goods_price_con_li[gp_id='"+gp_ids[gp_id]+"']");
                        var gp_name = gp_li.html();
                        var gtp_name = gp_li.parent().siblings('.goods_price_head').html();
                        a.children('.goods_price_con_list').append(" <div class='goods_price_con_prop' gp_id='"+gp_ids[gp_id]+"'><div class='goods_td goods_price_con_prop_name'>"+gtp_name+"</div> <div class='goods_td goods_price_con_prop_value'>"+gp_name+"</div> </div>");

                    }
                }
            }else{
                $(this).removeClass('goods_price_con_li_click');
                $(".goods_price_con_prop[gp_id='"+$(this).attr('gp_id')+"']").removeClass('goods_price_con_prop_select');
            }

        });
    });
    $(function(){
        //上传头像
        var up = getUpload();
        up.browse_button = "imgUp";
        //up.container = "adminHeadImg";
        up['init'].UploadProgress = function(up,file){
            $("#bar").css("width",file.percent+"%");
        };
        up['init'].FileUploaded = function (up, file, info) {
            var domain = up.getOption('domain');
            var res = JSON.parse(info);
            $("#adminHeadImg>img").attr("src", domain + "/" + res.key + "?imageView2/5/w/75/h/75");
            $("#adminHeadImg>input[name='img']").val(domain + "/" + res.key);
            $("#bar").css("background-color","#50D1DE");
        };
        var uploader = Qiniu.uploader(up);
    });
</script>